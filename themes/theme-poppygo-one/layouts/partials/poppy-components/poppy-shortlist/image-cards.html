{{- $page := .page -}}
{{- $content := .content -}}
{{- $design := .design -}}

{{- with $design -}}
<div class="{{.vertical_space}}">
    {{ if $content.title }}<h3 class="{{.title}}">{{ $content.title }}</h3>{{ end }}
    {{ if $content.subtitle }}<p class="{{.subtitle}}">{{ $content.subtitle }}</p>{{ end }}

    <div class="poppy-logo-banner-wrapper">
        <div class="poppy-logo-banner">
            {{- range $item := $content.items -}}
                {{ if and $item.image (not (eq $item.image "none")) -}}
                    <div class="poppy-logo-item">
                        {{ if $item.link }}
                            <a href="{{ $item.link | safeURL }}" target="_blank" rel="noopener">
                                {{- partial "poppy-elements/image" (dict
                                        "resource_page" $content.fg_resource_page
                                        "name" $item.image
                                        "class" "h-full w-full object-contain"
                                        "alt" ($item.name | default "logo")
                                        "logo_style" $item.logo_style /* ADDED HERE */
                                    ) -}}
                            </a>
                        {{ else }}
                            {{- partial "poppy-elements/image" (dict
                                        "resource_page" $content.fg_resource_page
                                        "name" $item.image
                                        "class" "h-full w-full object-contain"
                                        "alt" ($item.name | default "logo")
                                        "logo_style" $item.logo_style /* ADDED HERE */
                                    ) -}}
                        {{ end }}
                    </div>
                {{- end -}}
            {{- end -}}

            {{/* This second loop duplicates the logos to create the seamless infinite scroll effect */}}
            {{- range $item := $content.items -}}
                {{ if and $item.image (not (eq $item.image "none")) -}}
                    <div class="poppy-logo-item" aria-hidden="true"> {{/* aria-hidden for accessibility on duplicate elements */}}
                        {{ if $item.link }}
                            <a href="{{ $item.link | safeURL }}" target="_blank" rel="noopener">
                                {{- partial "poppy-elements/image" (dict
                                        "resource_page" $content.fg_resource_page
                                        "name" $item.image
                                        "class" "h-full w-full object-contain"
                                        "alt" ($item.name | default "logo")
                                        "logo_style" $item.logo_style /* ADDED HERE */
                                    ) -}}
                            </a>
                        {{ else }}
                            {{- partial "poppy-elements/image" (dict
                                        "resource_page" $content.fg_resource_page
                                        "name" $item.image
                                        "class" "h-full w-full object-contain"
                                        "alt" ($item.name | default "logo")
                                        "logo_style" $item.logo_style /* ADDED HERE */
                                    ) -}}
                        {{ end }}
                    </div>
                {{- end -}}
            {{- end -}}
        </div>
    </div>
</div>
{{- end -}}


<!-- {{- $page := .page -}}
{{- $content := .content -}}
{{- $design := .design -}}

{{- $amount := 0 -}}
{{- range $content.items -}}
  {{ if and .image (not (eq .image "none")) -}}
    {{- $amount = add $amount 1 -}}
  {{- end -}}
{{- end -}}

{{- with $design -}}
<div class="{{.vertical_space}} ">
  <h3 class=" {{.title }}">{{ $content.title }}</h3>
  <p class=" {{.subtitle}}">{{ $content.subtitle }}</p>
  <div class=" grid grid-flow-row-dense grid-cols-12 {{.gridgap}}">
      {{- range $index, $item := $content.items -}}
          {{- $span := partial "poppy-elements/standard-columns" (dict "amount" $amount "index" $index) -}}
          <a href="{{.link }}" class="{{$span}} flex flex-col w-full h-full ">
            <div>
              {{- partial "poppy-elements/image" (dict "resource_page" $content.fg_resource_page "name" .image "class" "w-full") -}}
            </div>
          </a>
      {{- end -}}
  </div>
</div>
{{- end -}}
 -->
